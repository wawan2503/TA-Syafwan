<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kalkulator Antena Mikrostrip</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
</head>
<body>
  <header class="topbar">
    <div class="topbar-inner">
      <div>
        <div class="brand-title">Kalkulator Antena Mikrostrip</div>
        <div class="brand-subtitle">Tampilan mengikuti tugas (Flask)</div>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- LEFT -->
    <section class="panel left">
      <form method="post" class="card">
        <div class="card-header">
          <h2>Input</h2>
          <p>Parameter tetap sesuai tugas: h, Zo, εr, c</p>
        </div>

        <div class="grid">
          <label class="field">
            <span>Frekuensi (GHz)</span>
            <select name="freq">
              {% for f in freq_options %}
                <option value="{{ f }}" {% if f == selected_freq %}selected{% endif %}>{{ f }}</option>
              {% endfor %}
            </select>
          </label>

          <label class="field">
            <span>h (mm)</span>
            <input value="{{ fixed.h_mm }}" readonly />
          </label>

          <label class="field">
            <span>Zo (Ω)</span>
            <input value="{{ fixed.z0 }}" readonly />
          </label>

          <label class="field">
            <span>εr</span>
            <input value="{{ fixed.er }}" readonly />
          </label>

          <label class="field">
            <span>c (m/s)</span>
            <input value="{{ '{:.0e}'.format(fixed.c) }}" readonly />
          </label>
        </div>

        <div class="actions">
          <button class="btn" type="submit">Hitung</button>
        </div>

        {% if error %}
          <div class="alert">{{ error }}</div>
        {% endif %}

        <div class="card-divider"></div>

        <div class="card-header">
          <h2>Output Spesifikasi</h2>
          <p>Wp, Lp, Wg, Lg, Wf, Lf</p>
        </div>

        {% if results %}
          <div class="table">
            <div class="row"><div>Wp (mm)</div><div>{{ '%.2f'|format(results.wp_mm) }}</div></div>
            <div class="row"><div>Lp (mm)</div><div>{{ '%.2f'|format(results.lp_mm) }}</div></div>
            <div class="row"><div>Wg (mm)</div><div>{{ '%.2f'|format(results.wg_mm) }}</div></div>
            <div class="row"><div>Lg (mm)</div><div>{{ '%.2f'|format(results.lg_mm) }}</div></div>
            <div class="row"><div>Wf (mm)</div><div>{{ '%.2f'|format(results.wf_mm) }}</div></div>
            <div class="row"><div>Lf (mm)</div><div>{{ '%.2f'|format(results.lf_mm) }}</div></div>
            <div class="row subtle"><div>εeff (patch)</div><div>{{ '%.4f'|format(results.eps_eff_patch) }}</div></div>
            <div class="row subtle"><div>εeff (feedline)</div><div>{{ '%.4f'|format(results.eps_eff_line) }}</div></div>
          </div>
        {% else %}
          <div class="muted">Klik <b>Hitung</b> untuk menampilkan hasil & gambar.</div>
        {% endif %}

        <div class="card-divider"></div>

        <div class="card-header">
          <h2>Catatan Hasil Simulator</h2>
          <p>Opsional: isi manual hasil AWR / CST</p>
        </div>

        <div class="grid">
          <label class="field">
            <span>Hasil Simulator AWR</span>
            <textarea placeholder="Contoh: S11 min, bandwidth, VSWR, gain..."></textarea>
          </label>
          <label class="field">
            <span>Hasil Simulator CST</span>
            <textarea placeholder="Contoh: S11 min, bandwidth, VSWR, gain..."></textarea>
          </label>
        </div>
      </form>
    </section>

    <!-- RIGHT -->
    <section class="panel right">
      <div class="card">
        <div class="card-header">
          <h2>Visualisasi Antena</h2>
          <p>Gambar tampil setelah tombol <b>Hitung</b>.</p>
        </div>

        <div class="viz">
          {% if svg_results %}
            {% with results=svg_results %}
              {% include "_antenna.svg" %}
            {% endwith %}
          {% else %}
            <div class="viz-placeholder"></div>
          {% endif %}
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    Flask • Tampilan sesuai tugas
  </footer>
</body>
</html>
